<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Products</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }

        .store-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .back-btn {
            display: inline-block;
            color: #4CAF50;
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .back-btn:hover {
            text-decoration: underline;
        }

        .store-header {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .store-header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .search-toolbar {
            margin: 20px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }

        .search-toolbar form {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-toolbar input,
        .search-toolbar select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            flex: 1;
            min-width: 150px;
        }

        .search-toolbar .btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }

        .search-toolbar .btn:hover {
            background-color: #45a049;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 15px;
        }

        .product-card h3 {
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .product-info p {
            color: #555;
            margin-bottom: 5px;
        }

        .ranking-buttons {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .rank-btn {
            padding: 8px 15px;
            border: 1px solid #4CAF50;
            background-color: white;
            color: #4CAF50;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .rank-btn:hover {
            background-color: #f0f8f0;
        }

        .rank-btn.active {
            background-color: #4CAF50;
            color: white;
        }

        .ranking-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 20px 0;
            display: none;
        }

        .ranking-section h2 {
            color: #333;
            margin-bottom: 15px;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
        }

        .ranking-table th,
        .ranking-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .ranking-table th {
            background-color: #f5f5f5;
            color: #333;
            font-weight: bold;
        }

        .ranking-table tr:hover {
            background-color: #f9f9f9;
        }

        .ranking-table td:first-child {
            font-weight: bold;
            color: #4CAF50;
        }

        .store-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .metric-card h3 {
            color: #4CAF50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .metric-label {
            color: #666;
        }

        .metric-value {
            font-weight: bold;
            color: #333;
        }

        .ranking-table th,
        .ranking-table td {
            padding: 12px 8px;
            font-size: 0.95rem;
        }

        .ranking-table td:nth-child(4),
        .ranking-table td:nth-child(5),
        .ranking-table td:nth-child(6) {
            text-align: right;
        }

        .review-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .rating {
            color: #f39c12;
            font-weight: bold;
        }

        .review-count {
            color: #666;
            font-size: 0.9em;
        }

        .price {
            font-size: 1.1em;
            font-weight: bold;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <div class="store-container">
        <a href="mystore.html" class="back-btn">← Back to My Stores</a>
        
        <div class="store-header">
            <h1>Store Name</h1>
        </div>

        <div class="store-metrics">
            <div class="metric-card">
                <h3>Stock Overview</h3>
                <div class="metric-item">
                    <span class="metric-label">Total Products in Stock:</span>
                    <span class="metric-value">1,250 items</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Total Products Sold:</span>
                    <span class="metric-value">3,500 items</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>Sales Performance</h3>
                <div class="metric-item">
                    <span class="metric-label">Total Revenue:</span>
                    <span class="metric-value">$25,680.00</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">This Month:</span>
                    <span class="metric-value">$3,420.00</span>
                </div>
            </div>
        </div>

        <div class="search-toolbar">
            <form action="/search" method="GET">
                <input type="text" name="productName" placeholder="Search by product name" />
                <select name="category">
                    <option value="">All Categories</option>
                    <option value="electronics">Electronics</option>
                    <option value="clothing">Clothing</option>
                    <option value="books">Books</option>
                    <!-- Add more categories as needed -->
                </select>
                <input type="number" name="minPrice" placeholder="Min Price" min="0" step="0.01" />
                <input type="number" name="maxPrice" placeholder="Max Price" min="0" step="0.01" />
                <button type="submit" class="btn">Search</button>
            </form>
        </div>

        <div class="ranking-buttons">
            <button class="rank-btn active" onclick="sortProducts('popular')">Sort by Popularity</button>
            <button class="rank-btn" onclick="sortProducts('price')">Sort by Price</button>
            <button class="rank-btn" onclick="sortProducts('rating')">Sort by Rating</button>
            <button class="rank-btn" onclick="sortProducts('reviews')">Sort by Reviews</button>
        </div>

        <div class="products-grid">
            <!-- Product 1 -->
            <div class="product-card">
                <h3>Product Name 1</h3>
                <div class="product-info">
                    <p class="price">Price: $20.00</p>
                    <p>Quantity: 50 in stock</p>
                    <p>Category: Electronics</p>
                    <div class="review-info">
                        <p class="rating">Rating: 4.8 ⭐</p>
                        <p class="review-count">Reviews: 150</p>
                    </div>
                </div>
            </div>

            <!-- Product 2 -->
            <div class="product-card">
                <h3>Product Name 2</h3>
                <div class="product-info">
                    <p class="price">Price: $15.00</p>
                    <p>Quantity: 30 in stock</p>
                    <p>Category: Clothing</p>
                    <div class="review-info">
                        <p class="rating">Rating: 4.5 ⭐</p>
                        <p class="review-count">Reviews: 120</p>
                    </div>
                </div>
            </div>

            <!-- Add more product cards as needed -->
        </div>
    </div>

    <script>
        // You can use this script to dynamically load store data based on the storeId
        const urlParams = new URLSearchParams(window.location.search);
        const storeId = urlParams.get('storeId');
        document.querySelector('.store-header h1').textContent = `Store Name for ${storeId}`;
        // Implement logic to fetch and display products for the specific store

        function sortProducts(criteria) {
            // Update active button
            const buttons = document.querySelectorAll('.rank-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Get all product cards
            const productsGrid = document.querySelector('.products-grid');
            const products = Array.from(productsGrid.children);

            // Sort products based on criteria
            products.sort((a, b) => {
                switch(criteria) {
                    case 'price':
                        const priceA = parseFloat(a.querySelector('.price').textContent.replace('Price: $', ''));
                        const priceB = parseFloat(b.querySelector('.price').textContent.replace('Price: $', ''));
                        return priceA - priceB;
                    case 'rating':
                        const ratingA = parseFloat(a.querySelector('.rating').textContent.replace('Rating: ', ''));
                        const ratingB = parseFloat(b.querySelector('.rating').textContent.replace('Rating: ', ''));
                        return ratingB - ratingA;
                    case 'reviews':
                        const reviewsA = parseInt(a.querySelector('.review-count').textContent.replace('Reviews: ', ''));
                        const reviewsB = parseInt(b.querySelector('.review-count').textContent.replace('Reviews: ', ''));
                        return reviewsB - reviewsA;
                    case 'popular':
                    default:
                        // Combine rating and review count for popularity
                        const popA = parseFloat(a.querySelector('.rating').textContent.replace('Rating: ', '')) * 
                                   parseInt(a.querySelector('.review-count').textContent.replace('Reviews: ', ''));
                        const popB = parseFloat(b.querySelector('.rating').textContent.replace('Rating: ', '')) * 
                                   parseInt(b.querySelector('.review-count').textContent.replace('Reviews: ', ''));
                        return popB - popA;
                }
            });

            // Reorder the products in the DOM
            products.forEach(product => productsGrid.appendChild(product));
        }

        // Initialize with popularity sort
        window.onload = () => sortProducts('popular');

        // Add this function to your existing JavaScript
        function loadProducts() {
            const searchParams = new URLSearchParams(window.location.search);
            const search = searchParams.get('productName') || '';
            const category = searchParams.get('category') || '';
            const minPrice = searchParams.get('minPrice') || '';
            const maxPrice = searchParams.get('maxPrice') || '';

            fetch(`get_products.php?search=${search}&category=${category}&minPrice=${minPrice}&maxPrice=${maxPrice}`)
                .then(response => response.json())
                .then(products => {
                    const productsGrid = document.querySelector('.products-grid');
                    productsGrid.innerHTML = products.map(product => `
                        <div class="product-card">
                            <h3>${product.product_name}</h3>
                            <div class="product-info">
                                <p class="price">Price: $${product.price}</p>
                                <p>Quantity: ${product.quantity} in stock</p>
                                <p>Category: ${product.category}</p>
                                <div class="review-info">
                                    <p class="rating">Rating: ${product.rating} ⭐</p>
                                    <p class="review-count">Reviews: ${product.review_count}</p>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => console.error('Error:', error));
        }

        // Call loadProducts when page loads and when search form is submitted
        window.onload = loadProducts;
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            loadProducts();
        });
    </script>
</body>
</html> 